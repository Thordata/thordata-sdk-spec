# spec/v1/proxy.yaml
gateway:
  # The SDK should allow users to explicitly pass a host; default values are only "fallbacks"
  defaultHost: "pr.thordata.net"

  # Dashboard will provide "account-specific" hosts (strongly recommended for users)
  dashboardHostPatterns:
    - "{shard}.pr.thordata.net"
    - "{shard}.{region}.thordata.net"

  # List of regions (according to dashboard)
  regions:
    common: ["na", "eu", "as"]     # Available for multiple products
    residentialExtra: ["va"]       # Exclusive to residential
    defaultRegionAlias: "pr"       # Exists in dashboard as {shard}.pr.thordata.net

  # Historical/compatible hosts used in the SDK (currently used in the code)
  compatibilityHosts:
    - "pr.thordata.net"
    - "t.pr.thordata.net"
    - "t.na.thordata.net"
    - "t.eu.thordata.net"
    - "t.as.thordata.net"
    - "dc.pr.thordata.net"
    - "m.pr.thordata.net"
    - "isp.pr.thordata.net"

auth:
  usernamePrefix: "td-customer-"
  # The client's default password is empty, but dashboard outputs include passwords
  # Therefore, empty passwords are not treated as standard here, only as "compatible"
  passwordMayBeEmpty: true

products:
  residential: { port: 9999 }
  mobile:      { port: 5555 }
  datacenter:  { port: 7777 }
  isp:         { port: 6666, mode: "direct_or_gateway" }  # In Python, StaticISPProxy is direct

credentialsEnv:
  residential: { username: "THORDATA_RESIDENTIAL_USERNAME", password: "THORDATA_RESIDENTIAL_PASSWORD" }
  mobile:      { username: "THORDATA_MOBILE_USERNAME",      password: "THORDATA_MOBILE_PASSWORD" }
  datacenter:  { username: "THORDATA_DATACENTER_USERNAME",  password: "THORDATA_DATACENTER_PASSWORD" }
  isp:
    host:      "THORDATA_ISP_HOST"
    username:  "THORDATA_ISP_USERNAME"
    password:  "THORDATA_ISP_PASSWORD"

# Username assembly rules (based on Python ProxyConfig.build_username / JS Proxy.buildUsername)
usernameSegments:
  order:
    - "continent"   # Supported in Python, not currently in JS
    - "country"
    - "state"       # Supported in Python, not currently in JS (JS has region field but not implemented)
    - "city"
    - "asn"         # Supported in Python, not currently in JS
    - "sessid"
    - "sesstime"
  keys:
    continent: "continent"
    country: "country"
    state: "state"
    city: "city"
    asn: "asn"
    sessionId: "sessid"
    sessionDurationMinutes: "sesstime"